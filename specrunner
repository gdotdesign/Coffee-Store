Coffee = require('coffee-script')
fs = require 'fs'
{compile} = require('./compiler.coffee')
console.log compile
require('zappa') ->

  @use 'bodyParser', 'methodOverride', @app.router, 'static'

  @configure
    development: => @use errorHandler: {dumpExceptions: on}
    production: => @use 'errorHandler'

  
  @view index: -> ""
  @view layout: ->
    doctype 5
    html ->
      head ->
        title "Coffee-Store Specs"
        link rel: 'stylesheet', href: "/nodeunit.css"
        script src:"nodeunit.js"
        script src:"coffee-store.js"
        script src:"specs.js"
      body ->
        script 'nodeunit.run(suites)'
    
  @get '/': -> @render 'index'
  @get '/coffee-store.js': -> compile()
  @get '/specs.js': -> Coffee.compile fs.readFileSync('./Specs/test.coffee','utf-8'), {bare:true}

